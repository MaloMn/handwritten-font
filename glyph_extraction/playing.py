import matplotlib.pyplot as plt
import cv2
import numpy as np
import hdbscan

data = np.float32([2301, 2287, 2285, 2265, 2256, 2254, 2246, 2239, 2057, 2041, 2020, 2016,
        2005, 2003, 1962, 1955, 1977, 1975, 1973, 1970, 1967, 1964, 1962, 1960,
        1958, 1957, 1955, 1954, 1952, 1947, 1936, 1814, 1807, 1783, 1746, 1775,
        1770, 1765, 1755, 1754, 1752, 1712, 1749, 1746, 1745, 1745, 1744, 1743,
        1733, 1727, 1717, 1712, 1705, 1563, 1559, 1521, 1554, 1514, 1538, 1537,
        1536, 1532, 1526, 1522, 1521, 1514, 1507, 1506, 1500, 1500, 1489, 1488,
        1487, 1322, 1314, 1306, 1304, 1302, 1302, 1300, 1294, 1288, 1284, 1277,
        1078, 1074, 1071, 1070, 1069, 1064, 1063, 1062, 1058, 1051, 1051, 841,
        829, 827, 826, 826, 824, 824, 813, 809, 795, 789, 598, 603,
        607, 607, 607, 606, 604, 603, 598, 595, 595, 568, 590, 590,
        582, 568, 564, 560, 381, 381, 362, 368, 384, 382, 381, 354,
        374, 368, 368, 365, 363, 363, 362, 362, 362, 359, 354, 352,
        133, 168, 163, 160, 156, 154, 151, 151, 149, 148, 147, 145,
        144, 142, 141, 137, 133])

data = data.reshape(-1, 1)
clustering = hdbscan.HDBSCAN().fit(data)
centers = []
for i in range(len(np.unique(clustering.labels_))):
    centers.append(np.mean(data[clustering.labels_ == i]))
print(centers)

plt.hist(data, 100, color = 'b')
plt.hist(centers, 32, color='y')

plt.show()
